# 网络和安全相关面试题

[[toc]]
## OSI七层参考模型
- 应用层
- 表示层
- 会话层
- 传输层
- 网络层
- 数据链路层
- 物理层

## TCP协议和UDP协议，以及他们之间的区别
### TCP协议
`TCP`协议是传输控制协议，建立连接需要先需要进行握手，断开连接时需要进行四次挥手。

TCP头部的结构如下：
![TCP头部](./img/TCP-head.jpg)

特点：
- TCP 协议是面向连接的，在通信双方进行通信前，需要通过三次握手建立连接。它需要在端系统中维护双方连接的状态信息。
- TCP 协议通过序号、确认号、定时重传、检验和等机制，来提供可靠的数据传输服务。
- TCP 协议提供的是点对点的服务，即它是在单个发送方和单个接收方之间的连接。
- TCP 协议提供的是全双工的服务，也就是说连接的双方的能够向对方发送和接收数据。
- TCP 提供了拥塞控制机制，在网络拥塞的时候会控制发送数据的速率，有助于减少数据包的丢失和减轻网络中的拥塞程度。
- TCP 提供了流量控制机制，保证了通信双方的发送和接收速率相同。如果接收方可接收的缓存很小时，发送方会降低发送 速率，避免因为缓存填满而造成的数据包的丢失。

### 三次握手和四次挥手
建立TCP连接时，需要进行三次握手，流程如下：
![三次握手](./img/TCP-Start.jpg)
注意区分上图中ACK的大小写，大写表示标志位/标识符，小写表示确认号。具体见TCP头部结构图片。

关闭TCP连接时，需要进行四次挥手，流程如下：
![四次挥手](./img/TCP-End.jpg)

#### 为什么发起TCP连接时不能两次握手
为了实现可靠数据传输，TCP 协议的通信双方，都必须维护一个序列号，以标识发送出去的数据包中，哪些是已经被对方收到的。三次握手的过程即是通信双方相互告知序列号起始值，并确认对方已经收到了序列号起始值的必经步骤。

如果只是两次握手， 至多只有连接发起方的起始序列号能被确认， 另一方选择的序列号则得不到确认。可能会导致失效的连接请求报文段被服务端接收的情况，从而产生错误。

#### 为什么关闭TCP连接时不能三次挥手
TCP是全双工通信的，关闭连接时，需要服务端和客服端都确定对方将不再发送数据。在客服端第1次挥手时，服务端可能还在发送数据。所以第2次挥手和第3次挥手不能合并。

### UDP协议
UDP是用户数据报协议，UDP是一种无连接的，不可靠的传输层协议。

特点：
- 使用 UDP 时，在发送报文段之前，通信双方没有握手的过程，因此 UDP 被称为是无连接的传输层协议。因为没有握手 过程，相对于 TCP 来说，没有建立连接的时延。因为没有连接，所以不需要在端系统中保存连接的状态。
- UDP 提供尽力而为的交付服务，也就是说 UDP 协议不保证数据的可靠交付。
- UDP 没有拥塞控制和流量控制的机制，所以 UDP 报文段的发送速率没有限制。
- 因为一个 UDP 套接字只使用目的地址和目的端口来标识，所以 UDP 可以支持一对一、一对多、多对一和多对多的交互通信。
- UDP 首部小，只有 8 个字节。
             
## HTTP协议
HTTP 是超文本传输协议，它定义了客户端和服务器之间交换报文的格式和方式，默认使用 80 端口。它使用 TCP 作为传输层协议(HTTP3已经使用UDP协议了)，保证了数据传输的可靠性。

HTTP 报文有两种，一种是请求报文，一种是响应报文。HTTP报文由首部(`headers`)与实体组成(`body`)，首部和实体间使用一个空行进行分割，该空行不能省略。下面是HTTP报文结构图：
![HTTP报文机构图](./img/HTTPMsgStructure2.png)

- 请求报文的首部的第一行成为请求行，请求行包含三个字段：方法字段(`Method`)、URL 字段和 HTTP 版本字段。如: `POST / HTTP/1.1`，方法字段(`Method`)可以取几种不同的值，一般有 GET、POST、HEAD、PUT 和 DELETE
- 响应报文的首部的第一行成为请求行状态行，状态行包含了三个字段：协议版本字段、状态码和相应的状态信息。如：`HTTP/1.0 200 OK`

### 常见的HTTP状态码以及其含义
| HTTP状态码 | 状态信息 | 解释 |
| --- | --- | --- |
| 200 | OK | 服务器已成功处理了请求。
| 206 | Partial Content | 服务器成功处理了部分请求。
| 301 | Moved Permanently | 已永久移动到新位置，即永久重定向。
| 302 | Found | 暂时跳转到其他页面，即暂时重定向。
| 304 | Not Modified | GET请求时，文档的内容（自上次访问以来或者根据请求的条件）并没有改变 |
| 400 | Bad Request |  错误请求，服务器无法解析该请求。
| 401 | Unauthorized | 未授权请求，没有进行身份验证或验证未通过。
| 403 | Forbidden | 禁止访问服务器，拒绝此请求。
| 404 | Not Found | 未找所请求的资源。
| 500 | Internal Server Error | 服务器内部错误服务器遇到错误，无法完成请求。
| 502 | Bad Gateway | 错误网关服务器作为网关或代理，从上游服务器收到无效响应。
更多HTTP状态码含义见[HTTP 响应代码](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status)

### HTTP1.1

### HTTP2
### HTTP3
### HTTPS
## XSS
XSS是跨站脚本攻击，常见的XSS有两种
## CSRF

